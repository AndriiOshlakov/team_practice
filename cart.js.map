{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//Логіка сторінки Cart\n\nimport { initTheme, btnTheme } from './js/helpers.js';\n\ninitTheme();\n\ndocument.querySelector('.theme-btn')?.addEventListener('click', btnTheme);\n\n\n// Ініціалізація масиву кошика з localStorage або пустого масиву\nexport let cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n\n// Функція для оновлення кількості товарів у кошику в навігації\nexport function updateCartCount() {\n  const cartCount = document.querySelector('.nav__count');\n  if (cartCount) {\n    cartCount.textContent = cartItems.length;\n  }\n}\n\n// Функція для підрахунку загальної вартості\nfunction calculateTotal(products) {\n  return products\n    .filter(product => cartItems.includes(product.id))\n    .reduce((total, product) => total + product.price, 0);\n}\n\n// Функція для рендерингу продуктів у кошику\nexport function renderCartProducts(products) {\n  const productsList = document.querySelector('.products');\n  const itemsCount = document.querySelector('[data-count]');\n  const totalPrice = document.querySelector('[data-price]');\n  const buyButton = document.querySelector('.cart-summary__btn');\n\n  if (!productsList) return;\n\n  const cartProducts = products.filter(product =>\n    cartItems.includes(product.id)\n  );\n\n  if (cartProducts.length === 0) {\n    productsList.innerHTML = '';\n\n    document.querySelector('.not-found').style.display = 'block';\n\n    if (itemsCount) itemsCount.textContent = '0';\n    if (totalPrice) totalPrice.textContent = '$0';\n    if (buyButton) buyButton.disabled = true;\n    return;\n  }\n\n  document.querySelector('.not-found').style.display = 'none';\n\n  const markup = cartProducts\n    .map(\n      ({ id, img, name, brand, category, price }) => `\n      <li class=\"products__item\" data-id=\"${id}\">\n        <img class=\"products__image\" src=\"${img}\" alt=\"${name}\"/>\n        <p class=\"products__title\">${name}</p>\n        <p class=\"products__brand\">\n          <span class=\"products__brand--bold\">Brand:</span> ${brand}\n        </p>\n        <p class=\"products__category\">Category: ${category}</p>\n        <p class=\"products__price\">Price: $${price}</p>\n      </li>\n    `\n    )\n    .join('');\n\n  productsList.innerHTML = markup;\n}\n\nconst total = calculateTotal(products);\nif (itemsCount) itemsCount.textContent = cartProducts.length;\nif (totalPrice) totalPrice.textContent = `$${total}`;\nif (buyButton) buyButton.disabled = false;\n\nexport function updateCartButtonText(productId) {\n  const addToCartBtn = document.querySelector('.modal-product__btn--cart');\n  if (addToCartBtn) {\n    const isInCart = cartItems.includes(productId);\n    addToCartBtn.textContent = isInCart ? 'Remove from cart' : 'Add to cart';\n  }\n}\n\nexport function toggleCartItem(productId) {\n  const index = cartItems.indexOf(productId);\n\n  if (index === -1) {\n    cartItems.push(productId);\n  } else {\n    cartItems.splice(index, 1);\n  }\n\n  localStorage.setItem('cart', JSON.stringify(cartItems));\n  updateCartCount();\n  updateCartButtonText(productId);\n}\n\n// Event listener кнопки модалки\ndocument.addEventListener('click', e => {\n  if (e.target.matches('.modal-product__btn--cart')) {\n    const modal = e.target.closest('.modal');\n    const productId = modal.dataset.productId;\n    toggleCartItem(productId);\n  }\n});\n\n// Event listener відкриття модалки\ndocument.addEventListener('modalopen', e => {\n  const productId = e.detail.productId;\n  updateCartButtonText(productId);\n});\n\n// Ініціалізувати оновлення кількості товарів у кошику при завантаженні сторінки\ndocument.addEventListener('DOMContentLoaded', () => {\n  updateCartCount();\n});\n\nfetchProducts().then(products => renderCartProducts(products));\n"],"names":["initTheme","_a","btnTheme","cartItems","updateCartCount","cartCount","calculateTotal","products","product","total","renderCartProducts","productsList","itemsCount","totalPrice","buyButton","cartProducts","markup","id","img","name","brand","category","price","updateCartButtonText","productId","addToCartBtn","isInCart","toggleCartItem","index","e"],"mappings":"mDAIAA,EAAS,SAETC,EAAA,SAAS,cAAc,YAAY,IAAnC,MAAAA,EAAsC,iBAAiB,QAASC,GAIzD,IAAIC,EAAY,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,GAAK,CAAA,EAG5D,SAASC,GAAkB,CAChC,MAAMC,EAAY,SAAS,cAAc,aAAa,EAClDA,IACFA,EAAU,YAAcF,EAAU,OAEtC,CAGA,SAASG,EAAeC,EAAU,CAChC,OAAOA,EACJ,OAAOC,GAAWL,EAAU,SAASK,EAAQ,EAAE,CAAC,EAChD,OAAO,CAACC,EAAOD,IAAYC,EAAQD,EAAQ,MAAO,CAAC,CACxD,CAGO,SAASE,EAAmBH,EAAU,CAC3C,MAAMI,EAAe,SAAS,cAAc,WAAW,EACjDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,SAAS,cAAc,oBAAoB,EAE7D,GAAI,CAACH,EAAc,OAEnB,MAAMI,EAAeR,EAAS,OAAOC,GACnCL,EAAU,SAASK,EAAQ,EAAE,CACjC,EAEE,GAAIO,EAAa,SAAW,EAAG,CAC7BJ,EAAa,UAAY,GAEzB,SAAS,cAAc,YAAY,EAAE,MAAM,QAAU,QAEjDC,IAAYA,EAAW,YAAc,KACrCC,IAAYA,EAAW,YAAc,MACrCC,IAAWA,EAAU,SAAW,IACpC,MACJ,CAEE,SAAS,cAAc,YAAY,EAAE,MAAM,QAAU,OAErD,MAAME,EAASD,EACZ,IACC,CAAC,CAAE,GAAAE,EAAI,IAAAC,EAAK,KAAAC,EAAM,MAAAC,EAAO,SAAAC,EAAU,MAAAC,KAAY;AAAA,4CACTL,CAAE;AAAA,4CACFC,CAAG,UAAUC,CAAI;AAAA,qCACxBA,CAAI;AAAA;AAAA,8DAEqBC,CAAK;AAAA;AAAA,kDAEjBC,CAAQ;AAAA,6CACbC,CAAK;AAAA;AAAA,KAGlD,EACK,KAAK,EAAE,EAEVX,EAAa,UAAYK,CAC3B,CAEA,MAAMP,EAAQH,EAAe,QAAQ,EACjC,aAAY,WAAW,YAAc,aAAa,QAClD,aAAY,WAAW,YAAc,IAAIG,CAAK,IAC9C,YAAW,UAAU,SAAW,IAE7B,SAASc,EAAqBC,EAAW,CAC9C,MAAMC,EAAe,SAAS,cAAc,2BAA2B,EACvE,GAAIA,EAAc,CAChB,MAAMC,EAAWvB,EAAU,SAASqB,CAAS,EAC7CC,EAAa,YAAcC,EAAW,mBAAqB,aAC/D,CACA,CAEO,SAASC,EAAeH,EAAW,CACxC,MAAMI,EAAQzB,EAAU,QAAQqB,CAAS,EAErCI,IAAU,GACZzB,EAAU,KAAKqB,CAAS,EAExBrB,EAAU,OAAOyB,EAAO,CAAC,EAG3B,aAAa,QAAQ,OAAQ,KAAK,UAAUzB,CAAS,CAAC,EACtDC,EAAe,EACfmB,EAAqBC,CAAS,CAChC,CAGA,SAAS,iBAAiB,QAASK,GAAK,CACtC,GAAIA,EAAE,OAAO,QAAQ,2BAA2B,EAAG,CAEjD,MAAML,EADQK,EAAE,OAAO,QAAQ,QAAQ,EACf,QAAQ,UAChCF,EAAeH,CAAS,CAC5B,CACA,CAAC,EAGD,SAAS,iBAAiB,YAAaK,GAAK,CAC1C,MAAML,EAAYK,EAAE,OAAO,UAC3BN,EAAqBC,CAAS,CAChC,CAAC,EAGD,SAAS,iBAAiB,mBAAoB,IAAM,CAClDpB,EAAe,CACjB,CAAC,EAED,cAAa,EAAG,KAAKG,GAAYG,EAAmBH,CAAQ,CAAC"}